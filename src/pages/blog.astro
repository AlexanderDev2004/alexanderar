---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { FaRegArrowAltCircleLeft } from "react-icons/fa";
import "../styles/global.css";

const allblog = await getCollection("content", (entry) => entry.data.type === "blog");
const sortedBlogs = allblog.sort((a, b) => new Date(b.data.date) - new Date(a.data.date));
---

<Layout
  title="Blog | All Posts"
  description="Explore all blog posts about programming, errors, and more."
>
  <div class="container mx-auto max-w-4xl px-4">
    <a
      href="/"
      class="text-gray-300 hover:text-blue-400 font-medium flex items-center gap-2 mb-6 px-4 py-2 rounded-md transition duration-200 mt-8"
    >
      <FaRegArrowAltCircleLeft className="text-lg" />
      Back to Home
    </a>

    <h1 class="text-4xl font-bold text-center mb-10">All Blog</h1>

    {sortedBlogs.length === 0 ? (
      <p class="text-gray-400 text-center">No blog posts available yet.</p>
    ) : (
      <div class="grid gap-8">
        {sortedBlogs.map((blog) => (
          <div class="bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition-all">
            <h3 class="text-xl font-semibold text-white">{blog.data.title}</h3>
            <p class="text-gray-400 mt-2">{blog.data.description}</p>
            {blog.data.tags && blog.data.tags.length > 0 && (
              <p class="text-gray-400 mt-2">
                Tags: {blog.data.tags.join(", ")}
              </p>
            )}
            <a
              href={`/blog/${blog.slug}`}
              class="text-blue-400 hover:underline mt-3 inline-block"
            >
              Read more â†’
            </a>
          </div>
        ))}
      </div>
    )}
  </div>
</Layout>